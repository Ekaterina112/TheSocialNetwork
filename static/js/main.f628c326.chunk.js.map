{"version":3,"sources":["avatar.jpg","components/LoginPage/LoginPage.module.css","API/api.ts","redux/messagePageReducer.tsx","components/NavBar/NavBar.module.css","components/NavBar/NavBar.tsx","components/News/News.tsx","components/Music/Music.tsx","components/Settings/Settings.tsx","redux/usersPageReducer.tsx","components/common/Paginator/Paginator.tsx","components/Users/User.tsx","components/Users/Users.tsx","redux/users_selectors.ts","components/Users/UsersContainer.tsx","components/Header/Header.tsx","redux/authReducer.tsx","components/Header/HeaderContainer.tsx","components/LoginPage/LoginForm.tsx","components/LoginPage/LoginPage.tsx","redux/appReducer.tsx","redux/redux-store.tsx","App.tsx","index.tsx","components/common/formController/AlternativeFormController.jsx","utilits/validators/postFormValidators.ts","components/common/Preloader.tsx","15.gif","components/common/Paginator/Paginator.module.css","components/Header/Header.module.css","components/common/formController/FormController.module.css","hoc/withAuthRedirect.tsx","redux/profilePageReducer.tsx"],"names":["module","exports","instance","axios","create","baseURL","withCredentials","headers","usersAPI","getUsers","currentPage","pageSize","get","then","response","data","getProfile","userId","profileAPI","postFollow","id","post","deleteUnfollow","delete","getStatus","updateStatus","status","put","savePhoto","file","formData","FormData","append","saveNewProfileData","updatedProfile","authAPI","getAuth","login","email","password","rememberMe","captcha","logout","securityAPI","getCaptcha","SEND_MESSAGE","initialState","dialogItemsData","name","messageData","message","sendMessageCreator","newMessageBody","type","messageReducer","state","action","v1","Nav","className","s","nav","item","to","activeClassName","activeLink","News","Music","Settings","FOLLOW","UNFOLLOW","SET_USERS","SET_CURRENT_PAGE","SET_USERS_TOTAL_COUNT","SET_FETCHING","SET_DISABLED_FOLLOWING_BTN","usersData","totalUsersCount","isFetching","followingInProgress","followSuccess","userID","unfollowSuccess","setCurrentPage","setIsFetching","setDisabledFollowingBTN","followUnfollowFlow","dispatch","apiMethod","actionCreator","a","resultCode","usersReducer","map","u","followed","totalCount","filter","Paginator","totalItemsCount","onPageChanged","portionSize","pagesCount","Math","ceil","pages","i","push","portionCount","useState","portionNumber","setPortionNumber","leftPortionPageNumber","rightPortionPageNumber","style","paginator","onClick","p","cn","selectedPage","pageNumber","User","user","follow","unfollow","alt","src","photos","small","userPhoto","width","height","disabled","some","Users","getUsersData","usersPage","getPageSize","getTotalUsersCount","getCurrentPage","getFetching","getFollowingInProgress","UsersAPIContainer","props","this","Preloader","React","Component","compose","connect","bind","page","items","WithAuthRedirectComponent","Header","classes","header","isAuth","SET_USER_DATA","GET_CAPTCHA_URL_SUCCESS","captchaUrl","setAuthUsersData","payload","getCaptchaUrlSuccess","getAuthUserData","url","authReducer","HeaderContainer","auth","LoginReduxForm","reduxForm","form","handleSubmit","error","onSubmit","Field","placeholder","component","Input","validate","required","value","formControlSummaryError","messages","length","stopSubmit","_error","SET_INITIALIZED","initialized","appReducer","reducers","combineReducers","profilePage","profileReducer","messagePage","app","formReducer","store","createStore","applyMiddleware","thunkMiddleware","window","DialogsContainer","lazy","ProfileContainer","App","initializeApp","fallback","path","render","UsersContainer","AppContainer","withRouter","promise","Promise","all","MainApp","ReactDOM","document","getElementById","UniversalForm","input","meta","touched","child","hasError","formControl","children","restProps","maxLengthCreator","maxlength","minLengthCreator","minLength","mapStateToPropsForRedirect","WrappedComponent","ADD_POST","SET_USERS_PROFILE","SET_STATUS","SET_PHOTO","GET_STATUS","DELETE_POST","postData","count","newPostText","profile","addPostCreator","newPostBody","setStatus","getUserProfile","getState","reject","newPost","el","postId"],"mappings":"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","file":"static/js/main.f628c326.chunk.js","sourcesContent":["export default \"data:image/jpeg;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControlSummaryError\":\"LoginPage_formControlSummaryError__k0374\"};","import axios from 'axios'\r\n\r\n//екземпляр со всеми настройками для конкретного API\r\n//без типизации\r\nconst instance = axios.create({\r\n    baseURL: 'https://social-network.samuraijs.com/api/1.0/',\r\n    withCredentials: true,\r\n    headers: {\r\n        'API-KEY': '97580e0f-7747-4533-9c03-60f1b0e4f8a8'\r\n    }\r\n})\r\nexport const usersAPI = {\r\n    getUsers: (currentPage: number, pageSize: number) => {\r\n        return instance.get(`users?page=${currentPage}&count=${pageSize}`)\r\n            .then(response => response.data)\r\n    },\r\n    getProfile: (userId: number) => {\r\n        return profileAPI.getProfile(userId)\r\n    },\r\n    postFollow: (id: number) => {\r\n        return instance.post(`follow/${id}`)\r\n            .then(response => response.data)\r\n    },\r\n    deleteUnfollow: (id: number) => {\r\n        return instance.delete(`follow/${id}`)\r\n            .then(response => response.data)\r\n    }\r\n}\r\nexport const profileAPI = {\r\n    getProfile: (userId: number) => {\r\n        return instance.get(`profile/${userId}`)\r\n            .then(response => response.data)\r\n    },\r\n    getStatus(userId: number) {\r\n        return instance.get(`profile/status/${userId}`)\r\n    },\r\n    updateStatus(status: string) {\r\n        return instance.put('profile/status', {status})\r\n    },\r\n    savePhoto(file: any) {\r\n        const formData = new FormData()\r\n        formData.append('image', file)\r\n        return instance.put('profile/photo', formData, {headers: {'Content-Type': 'multipart/form-data'}})\r\n    },\r\n    saveNewProfileData(updatedProfile: any) {\r\n        return instance.put('profile', updatedProfile)\r\n    },\r\n}\r\nexport const authAPI = {\r\n    getAuth() {\r\n        return instance.get(`auth/me`)\r\n    },\r\n    login(email: string, password: string, rememberMe: boolean,captcha:null|string) {\r\n        return instance.post('auth/login', {email, password, rememberMe, captcha})\r\n    },\r\n    logout() {\r\n        return instance.delete('auth/login')\r\n    },\r\n\r\n}\r\nexport const securityAPI = {\r\n    getCaptcha() {\r\n        return instance.get(`security/get-captcha-url`)\r\n    },\r\n}","import {ActionTypes, MessagePageType} from './types';\r\nimport {v1} from 'uuid';\r\n\r\nconst SEND_MESSAGE = 'messageReducer/SEND-MESSAGE'\r\n\r\n\r\nlet initialState: MessagePageType = {\r\n    dialogItemsData: [\r\n        {id: 1, name: 'Kate'},\r\n        {id: 2, name: 'Tom'},\r\n        {id: 3, name: 'Kristi'},\r\n        {id: 4, name: 'Mike'},\r\n        {id: 5, name: 'Jeny'}\r\n    ],\r\n    messageData: [\r\n        {id: 1, message: 'Hi'},\r\n        {id: 2, message: 'What\\'s up?'},\r\n        {id: 3, message: 'Well'},\r\n        {id: 4, message: 'Good'},\r\n        {id: 5, message: 'wOoOo'}\r\n    ],\r\n}\r\n\r\nconst messageReducer = (state = initialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case SEND_MESSAGE: {\r\n            return {\r\n                ...state,\r\n                messageData: [...state.messageData, {id: v1(), message: action.newMessageBody}]\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const sendMessageCreator = (newMessageBody: string) => ({\r\n    type: SEND_MESSAGE,\r\n    newMessageBody\r\n}) as const\r\n\r\nexport default messageReducer","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"NavBar_nav__3lyoh\",\"item\":\"NavBar_item__Wruz-\",\"activeLink\":\"NavBar_activeLink__3PUAu\"};","import React from 'react';\r\nimport '../../App.css';\r\nimport s from './NavBar.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nconst Nav = () => {\r\n    return   <nav className={s.nav}>\r\n        <div className={s.item}>\r\n            <NavLink to='/profile' activeClassName={s.activeLink}>Profile</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/dialogs' activeClassName={s.activeLink}>Messages</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/users' activeClassName={s.activeLink}>Users</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to ='/news' activeClassName={s.activeLink}>News</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/music' activeClassName={s.activeLink}>Music</NavLink>\r\n        </div>\r\n        <div className={s.item}>\r\n            <NavLink to='/settings' activeClassName={s.activeLink}>Settings</NavLink>\r\n        </div>\r\n    </nav>\r\n}\r\nexport default Nav","import React from 'react';\r\nimport s from './News.module.css'\r\n\r\nconst News = () => {\r\n    return (\r\n        <div>News</div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default News","import React from 'react';\r\nimport s from './Music.module.css'\r\n\r\nconst Music = () => {\r\n    return (\r\n        <div>Music</div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default Music","import React from 'react';\r\nimport s from './Settings.module.css'\r\n\r\nconst Settings = () => {\r\n    return (\r\n        <div>Settings</div>\r\n    )\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\nexport default Settings","import {ActionTypes} from './types';\r\nimport {usersAPI} from '../API/api';\r\nimport {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {AppStateType} from './redux-store';\r\n\r\nexport type PhotosType = {\r\n    'small': string | null,\r\n    'large': string | null,\r\n}\r\nexport type UsersDataType = {\r\n    id: number\r\n    name: string\r\n    status: string\r\n    photos: PhotosType\r\n    followed: boolean\r\n}\r\nexport type UsersPageType = {\r\n    usersData: Array<UsersDataType>\r\n    pageSize: number,\r\n    totalUsersCount: number,\r\n    currentPage: number\r\n    isFetching: boolean,\r\n    followingInProgress: Array<number>\r\n}\r\n\r\nconst FOLLOW = 'usersReducer/FOLLOW'\r\nconst UNFOLLOW = 'usersReducer/UNFOLLOW'\r\nconst SET_USERS = 'usersReducer/SET-USERS'\r\nconst SET_CURRENT_PAGE = 'usersReducer/SET-CURRENT-PAGE'\r\nconst SET_USERS_TOTAL_COUNT = 'usersReducer/SET-USERS-TOTAL-COUNT'\r\nconst SET_FETCHING = 'usersReducer/SET-FETCHING'\r\nconst SET_DISABLED_FOLLOWING_BTN = 'usersReducer/SET_DISABLED_FOLLOWING_BTN'\r\nlet initialState: UsersPageType = {\r\n    usersData: [],\r\n    pageSize: 20,\r\n    totalUsersCount: 0,\r\n    currentPage: 1,\r\n    isFetching: true,\r\n    followingInProgress: []\r\n}\r\n//редьюсеры принимают инициилизонный стэйт и определенный экшион,\r\n// по названию экшиона определяютя действия, для изменения стэйта\r\n// и возвращается измененный стэйт\r\n\r\nconst usersReducer = (state = initialState, action: ActionTypes) => {\r\n    switch (action.type) {\r\n        case FOLLOW: {\r\n            return {\r\n                ...state,\r\n                usersData: state.usersData.map(u => {\r\n                    if (u.id === action.userID) {\r\n                        return {...u, followed: true}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        }\r\n        case UNFOLLOW: {\r\n            return {\r\n                ...state,\r\n                usersData: state.usersData.map(u => {\r\n                    if (u.id === action.userID) {\r\n                        return {...u, followed: false}\r\n                    }\r\n                    return u\r\n                })\r\n            }\r\n        }\r\n        case SET_USERS: {\r\n            return {\r\n                ...state,\r\n                usersData: action.usersData\r\n            }\r\n        }\r\n        case SET_CURRENT_PAGE: {\r\n            return {\r\n                ...state,\r\n                currentPage: action.currentPage\r\n            }\r\n        }\r\n        case SET_USERS_TOTAL_COUNT: {\r\n            return {\r\n                ...state,\r\n                totalUsersCount: action.totalCount\r\n            }\r\n        }\r\n        case SET_FETCHING: {\r\n            return {\r\n                ...state,\r\n                isFetching: action.isFetching\r\n            }\r\n        }\r\n        case SET_DISABLED_FOLLOWING_BTN: {\r\n            return {\r\n                ...state,\r\n                followingInProgress: action.isFetching ?\r\n                    [...state.followingInProgress, action.userID]\r\n                    : state.followingInProgress.filter(id => id !== action.userID)\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\n//стреляет экшионы, это экшион креэйторы\r\nexport const followSuccess = (userID: number) => ({type: FOLLOW, userID}) as const\r\nexport const unfollowSuccess = (userID: number) => ({type: UNFOLLOW, userID}) as const\r\nexport const setUsers = (usersData: Array<UsersDataType>) => ({type: SET_USERS, usersData}) as const\r\nexport const setCurrentPage = (currentPage: number) => ({type: SET_CURRENT_PAGE, currentPage}) as const\r\nexport const setUsersTotalCount = (totalCount: number) => ({type: SET_USERS_TOTAL_COUNT, totalCount}) as const\r\nexport const setIsFetching = (isFetching: boolean) => ({type: SET_FETCHING, isFetching}) as const\r\nexport const setDisabledFollowingBTN = (isFetching: boolean, userID: number) => ({\r\n    type: SET_DISABLED_FOLLOWING_BTN,\r\n    isFetching,\r\n    userID\r\n}) as const\r\n\r\n\r\n//типизация для санок, если это обычная санака то dispatch:Dispatch<ActionTypes> импортируем из redux\r\n\r\ntype ThunkActionType = ThunkAction<void, AppStateType, unknown, ActionTypes>;\r\ntype ThunkDispatchType = ThunkDispatch<AppStateType, unknown, ActionTypes>;\r\n\r\nexport const getUsers = (page: number, pageSize: number): ThunkActionType => {\r\n    return async (dispatch: ThunkDispatchType) => {\r\n        dispatch(setIsFetching(true))\r\n        dispatch(setCurrentPage(page))\r\n        let data = await usersAPI.getUsers(page, pageSize)\r\n        dispatch(setIsFetching(false))\r\n        dispatch(setUsers(data.items))\r\n        dispatch(setUsersTotalCount(data.totalCount))\r\n    }\r\n}\r\n\r\n\r\n// why we not use one actionCreator?????????\r\n//refactoring\r\nconst followUnfollowFlow = async (dispatch: ThunkDispatchType, userId: number, apiMethod: Function, actionCreator: Function) => {\r\n    dispatch(setDisabledFollowingBTN(true, userId))\r\n    let data = await apiMethod(userId)\r\n    if (data.resultCode === 0) {\r\n        dispatch(actionCreator(userId))\r\n    }\r\n    dispatch(setDisabledFollowingBTN(false, userId))\r\n}\r\n\r\nexport const follow = (userId: number): ThunkActionType => {\r\n    return async (dispatch: ThunkDispatchType) => {\r\n        followUnfollowFlow(dispatch, userId, usersAPI.postFollow.bind(usersAPI), followSuccess)\r\n    }\r\n}\r\n\r\nexport const unfollow = (userId: number): ThunkActionType => {\r\n    return async (dispatch: ThunkDispatchType) => {\r\n        followUnfollowFlow(dispatch, userId, usersAPI.deleteUnfollow.bind(usersAPI), unfollowSuccess)\r\n    }\r\n}\r\n\r\n\r\nexport default usersReducer","import React, {useState} from 'react';\r\nimport style from './Paginator.module.css';\r\nimport cn from 'classnames'\r\n\r\ntype PropsType = {\r\n    totalItemsCount: number,\r\n    pageSize: number,\r\n    currentPage: number,\r\n    onPageChanged: (p: number) => void,\r\n    portionSize: number\r\n}\r\n\r\n\r\nconst Paginator: React.FC<PropsType> = ({\r\n                                            totalItemsCount,\r\n                                            pageSize,\r\n                                            currentPage,\r\n                                            onPageChanged, portionSize\r\n                                        }) => {\r\n\r\n\r\n    let pagesCount = Math.ceil(totalItemsCount / pageSize)\r\n    let pages = [];\r\n    for (let i = 1; i <= pagesCount; i++) {\r\n        pages.push(i)\r\n    }\r\n    let portionCount = Math.ceil(pagesCount / portionSize)\r\n    let [portionNumber, setPortionNumber] = useState<number>(1)\r\n    let leftPortionPageNumber = (portionNumber - 1) * portionSize + 1\r\n    let rightPortionPageNumber = portionNumber * portionSize\r\n\r\n    return <div className={style.paginator}>\r\n        {\r\n            portionNumber > 1 && <button onClick={() => {\r\n                setPortionNumber(portionNumber - 1)\r\n            }}>PREV</button>\r\n        }\r\n        {pages\r\n            .filter(p => p >= leftPortionPageNumber && p <= rightPortionPageNumber)\r\n            .map(p => {\r\n                return <span\r\n                    className={cn({[style.selectedPage]: currentPage === p}, style.pageNumber)}\r\n                    key={p}\r\n                    onClick={() => {\r\n                        onPageChanged(p)\r\n                    }}>\r\n                    {p}\r\n                </span>\r\n            })}\r\n        {\r\n            portionCount > portionNumber && <button onClick={() => {\r\n                setPortionNumber(portionNumber + 1)\r\n            }}>NEXT</button>\r\n        }\r\n    </div>\r\n}\r\n\r\nexport default Paginator\r\n\r\n","import React from 'react';\r\nimport {UsersDataType} from '../../redux/usersPageReducer';\r\nimport userPhoto from './../../avatar.jpg'\r\nimport {NavLink} from 'react-router-dom';\r\n\r\n\r\ntype PropsType = {\r\n    user: UsersDataType,\r\n    follow: (userId: number) => void,\r\n    unfollow: (userId: number) => void,\r\n    followingInProgress: Array<number>,\r\n}\r\n\r\n\r\nconst User: React.FC<PropsType> = ({user, followingInProgress, follow, unfollow}) => {\r\n\r\n    return <div>\r\n                    <span>\r\n                        <div>\r\n                            <NavLink to={'/profile/' + user.id}>\r\n                            <img alt={'here avatar'} src={user.photos.small != null ? user.photos.small : userPhoto} width={100}\r\n                                 height={100}/>\r\n                            </NavLink>\r\n                        </div>\r\n                        <div>\r\n                            {user.followed\r\n                                ? <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                          onClick={() => {\r\n                                              unfollow(user.id)\r\n                                          }}>unfollow</button>\r\n                                : <button disabled={followingInProgress.some(id => id === user.id)}\r\n                                          onClick={() => {\r\n                                              follow(user.id)\r\n                                          }}>follow</button>}\r\n                        </div>\r\n                    </span>\r\n        <span>\r\n                        <span>\r\n                            <div>{user.name}</div>\r\n                             <div>{user.status}</div>\r\n                        </span>\r\n                        <span>\r\n                           <div>{'u.location.country'}</div>\r\n                             <div>{'u.location.city'}</div>\r\n                        </span>\r\n                    </span>\r\n    </div>\r\n}\r\n\r\nexport default User\r\n\r\n","import React from 'react';\r\nimport {UsersDataType} from '../../redux/usersPageReducer';\r\nimport Paginator from '../common/Paginator/Paginator';\r\nimport User from './User';\r\n\r\n\r\ntype PropsType = {\r\n    totalUsersCount: number,\r\n    pageSize: number,\r\n    currentPage: number,\r\n    onPageChanged: (p: number) => void,\r\n    usersData: Array<UsersDataType>,\r\n    follow: (userId: number) => void,\r\n    unfollow: (userId: number) => void,\r\n    followingInProgress: Array<number>,\r\n}\r\n\r\n\r\nconst Users: React.FC<PropsType> = ({totalUsersCount, pageSize, currentPage, onPageChanged, usersData, followingInProgress, unfollow, follow}) => {\r\n    return <div>\r\n        <Paginator totalItemsCount={totalUsersCount} pageSize={pageSize} currentPage={currentPage}\r\n                   onPageChanged={onPageChanged} portionSize={10}/>\r\n        <div>\r\n            {\r\n                usersData.map(u => <User key={u.id} user={u} follow={follow} unfollow={unfollow}\r\n                                         followingInProgress={followingInProgress}/>)\r\n            }\r\n        </div>\r\n    </div>\r\n}\r\n\r\nexport default Users\r\n\r\n","import {AppStateType} from './redux-store';\r\n\r\n\r\nexport const getUsersData = (state: AppStateType) => {\r\n    return state.usersPage.usersData\r\n}\r\nexport const getPageSize = (state: AppStateType) => {\r\n    return state.usersPage.pageSize\r\n}\r\nexport const getTotalUsersCount = (state: AppStateType) => {\r\n    return state.usersPage.totalUsersCount\r\n}\r\nexport const getCurrentPage = (state: AppStateType) => {\r\n    return state.usersPage.currentPage\r\n}\r\nexport const getFetching = (state: AppStateType) => {\r\n    return state.usersPage.isFetching\r\n}\r\nexport const getFollowingInProgress = (state: AppStateType) => {\r\n    return state.usersPage.followingInProgress\r\n}","import {connect} from 'react-redux';\r\nimport {follow, getUsers, setCurrentPage, unfollow, UsersDataType} from '../../redux/usersPageReducer';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport React, {ComponentType} from 'react';\r\nimport Users from './Users';\r\nimport Preloader from '../common/Preloader';\r\nimport {WithAuthRedirectComponent} from '../../hoc/withAuthRedirect';\r\nimport {compose} from 'redux';\r\nimport {\r\n    getCurrentPage,\r\n    getFetching,\r\n    getFollowingInProgress,\r\n    getPageSize,\r\n    getTotalUsersCount,\r\n    getUsersData\r\n} from '../../redux/users_selectors';\r\n\r\n\r\ntype UsersPropsType = MapDispatchPropsType & MapStatePropsType\r\n\r\nclass UsersAPIContainer extends React.Component<UsersPropsType> {\r\n    componentDidMount() {\r\n        const {currentPage, pageSize} = this.props\r\n        this.props.getUsers(currentPage, pageSize)\r\n    }\r\n\r\n    onPageChanged = (pageNumber: number) => {\r\n        const {pageSize} = this.props\r\n        this.props.getUsers(pageNumber, pageSize)\r\n    }\r\n\r\n    render() {\r\n\r\n        return <>\r\n            {this.props.isFetching ? <Preloader/> : null}\r\n            <Users\r\n                totalUsersCount={this.props.totalUsersCount}\r\n                pageSize={this.props.pageSize}\r\n                currentPage={this.props.currentPage}\r\n                onPageChanged={this.onPageChanged}\r\n                unfollow={this.props.unfollow}\r\n                follow={this.props.follow}\r\n                usersData={this.props.usersData}\r\n                followingInProgress={this.props.followingInProgress}\r\n\r\n            />\r\n        </>\r\n    }\r\n}\r\n\r\nexport type MapStatePropsType = {\r\n    // описываем, что возвращает MapStateToProps\r\n    usersData: Array<UsersDataType>\r\n    pageSize: number,\r\n    totalUsersCount: number,\r\n    currentPage: number,\r\n    isFetching: boolean,\r\n    followingInProgress: Array<number>\r\n}\r\n\r\nexport  type MapDispatchPropsType = {\r\n    // описываем, что возвращает MapDispatchToProps\r\n    follow: (userId: number) => void\r\n    unfollow: (userId: number) => void\r\n    setCurrentPage: (pageNumber: number) => void\r\n    getUsers: (currentPage: number, pageSize: number) => void\r\n}\r\n\r\n//контейнерная компонента просто снабжает нашу презентационную компоненту нужными пропсами\r\n//принимает весь стэйт целиком, глобальный и возвращает обьект с нужными данными!,\r\n//которые в свою очередь берем из закомбайненого редьюсеров\r\nlet mapStateToProps = (state: AppStateType): MapStatePropsType => {\r\n    return {\r\n        usersData: getUsersData(state),\r\n        pageSize: getPageSize(state),\r\n        totalUsersCount: getTotalUsersCount(state),\r\n        currentPage: getCurrentPage(state),\r\n        isFetching: getFetching(state),\r\n        followingInProgress: getFollowingInProgress(state)\r\n    }\r\n}\r\n/*//..............3...................2........................1\r\nlet AuthRedirectComponent = WithAuthRedirectComponent(UsersAPIContainer)\r\n//коннектим с помощью функции//mapStateToProps = state for our component//mapDispatchToProps for get out needed callbacks\r\n//...................................................................................4\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, {}, AppStateType>(mapStateToProps,\r\n    {follow, unfollow, setCurrentPage, getUsers})\r\n(AuthRedirectComponent)*/\r\nexport default compose<ComponentType>(connect<MapStatePropsType, MapDispatchPropsType, {}, AppStateType>(mapStateToProps,\r\n    {follow, unfollow, setCurrentPage, getUsers}),\r\n    WithAuthRedirectComponent)(UsersAPIContainer)","import React from 'react';\r\nimport classes from './Header.module.css';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\ntype PropsType = {\r\n    isAuth: boolean,\r\n    login: string | null\r\n    logout:()=>void\r\n}\r\n\r\nconst Header = (props: PropsType) => {\r\n    return <header className={classes.header}>\r\n        Whats uP!\r\n        <div className={classes.login}>\r\n            {props.isAuth ? <div>{props.login } <button  onClick={props.logout}>Log Out</button></div>\r\n                :\r\n                <NavLink to={'/login'} className={classes.login}> \r\n                    Login\r\n                </NavLink>}\r\n        </div>\r\n    </header>\r\n}\r\nexport default Header;","import {ActionTypes} from './types';\r\nimport {authAPI, securityAPI} from '../API/api';\r\nimport {Dispatch} from 'redux';\r\nimport {stopSubmit} from 'redux-form';\r\nimport {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {AppStateType} from './redux-store';\r\n\r\n\r\nconst SET_USER_DATA = 'authReducer/SET_USER_DATA'\r\nconst GET_CAPTCHA_URL_SUCCESS = 'authReducer/GET_CAPTCHA_URL_SUCCESS'\r\n\r\nexport type UsersAuthDataType = {\r\n    email: null | string,\r\n    id: null | number,\r\n    login: null | string,\r\n    isAuth: boolean,\r\n    captchaUrl: null | string,\r\n}\r\n\r\nlet initialState: UsersAuthDataType = {\r\n    email: null,\r\n    id: null,\r\n    login: null,\r\n    isAuth: false,\r\n    captchaUrl: null,\r\n}\r\n\r\n\r\nconst authReducer = (state = initialState, action: ActionTypes): UsersAuthDataType => {\r\n    switch (action.type) {\r\n        case GET_CAPTCHA_URL_SUCCESS:\r\n        case SET_USER_DATA: {\r\n            return {\r\n                ...state,\r\n                ...action.payload,\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n//actionCreator\r\nexport const setAuthUsersData = (payload: UsersAuthDataType) => ({type: SET_USER_DATA, payload}) as const\r\nexport const getCaptchaUrlSuccess = (captchaUrl: string) => ({\r\n    type: GET_CAPTCHA_URL_SUCCESS, payload: {captchaUrl}\r\n}) as const\r\n\r\n\r\n//thunkCreator\r\nexport const getAuthUserData = () => async (dispatch: Dispatch<ActionTypes>) => {\r\n    let response = await authAPI.getAuth()\r\n    if (response.data.resultCode === 0) {\r\n        let {email, id, login} = response.data.data\r\n        dispatch(setAuthUsersData({email, id, login, isAuth: true, captchaUrl: null}))\r\n    }\r\n}\r\n\r\n//TYPES FOR THUNK\r\ntype ThunkActionType = ThunkAction<void, AppStateType, unknown, ActionTypes>;\r\ntype ThunkDispatchType = ThunkDispatch<AppStateType, unknown, ActionTypes>;\r\n//thunkCreator\r\nexport const login = (email: string, password: string, rememberMe: boolean, captcha: string | null = null): ThunkActionType => {\r\n    return async (dispatch: ThunkDispatchType) => {\r\n        let response = await authAPI.login(email, password, rememberMe, captcha)\r\n        if (response.data.resultCode === 0) {\r\n            dispatch(getAuthUserData())\r\n        } else {\r\n            if (response.data.resultCode === 10) {\r\n                dispatch(getCaptcha())\r\n            }\r\n            let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error'\r\n            dispatch(stopSubmit('login', {_error: message}))\r\n        }\r\n    }\r\n}\r\nexport const logout = () => async (dispatch: Dispatch<ActionTypes>) => {\r\n    let response = await authAPI.logout()\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setAuthUsersData({email: null, id: null, login: null, isAuth: false, captchaUrl: null}))\r\n    }\r\n}\r\nexport const getCaptcha = () => async (dispatch: Dispatch<ActionTypes>) => {\r\n    let response = await securityAPI.getCaptcha()\r\n    const captchaUrl = response.data.url\r\n    dispatch(getCaptchaUrlSuccess(captchaUrl))\r\n}\r\n\r\nexport default authReducer","import React from 'react';\r\nimport Header from './Header';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport { logout} from '../../redux/authReducer';\r\n\r\n\r\ntype AuthPropsType = MapDispatchPropsType & MapStatePropsType\r\n\r\nclass HeaderContainer extends React.Component<AuthPropsType> {\r\n    render() {\r\n        return <Header {...this.props}/>\r\n    }\r\n}\r\n\r\nexport type MapStatePropsType = {\r\n    isAuth: boolean,\r\n    login: string | null\r\n}\r\n\r\nexport  type MapDispatchPropsType = {\r\n    logout:()=>void\r\n}\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => ({\r\n    isAuth: state.auth.isAuth,\r\n    login: state.auth.login\r\n})\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, {}, AppStateType>(mapStateToProps, {logout})(HeaderContainer);","import React from 'react';\r\nimport {Field, InjectedFormProps, reduxForm} from 'redux-form'\r\nimport {Input} from '../common/formController/AlternativeFormController';\r\nimport {required} from '../../utilits/validators/postFormValidators';\r\nimport s from './LoginPage.module.css'\r\n\r\nexport  type FormDataType = {\r\n    email: string,\r\n    password: string,\r\n    rememberMe: boolean,\r\n    captcha:null| string,\r\n}\r\nexport  type IProps = {\r\n    captchaUrl:null|string,\r\n}\r\n//& IProps add if want to give some other props\r\n// @ts-ignore\r\nconst LoginForm: React.FC<InjectedFormProps<FormDataType & IProps>> = ({handleSubmit, error,captchaUrl}) => {\r\n\r\n    return (\r\n        <form onSubmit={handleSubmit}>\r\n            <div>\r\n                <Field placeholder={'login'} name={'email'} component={Input} validate={[required]}/>\r\n            </div>\r\n            <div>\r\n                <Field type={'password'} placeholder={'password'} name={'password'} component={Input}\r\n                       validate={[required]}/>\r\n            </div>\r\n            <div>\r\n                <Field type={'checkbox'} value={'rememberMe'} name={'rememberMe'} component={Input}/>\r\n            </div>\r\n            {captchaUrl && <img src={captchaUrl}/>}\r\n            {captchaUrl &&  <Field type={''} placeholder={'captcha'} name={'captcha'} component={Input}\r\n                                   validate={[required]}/>}\r\n            {error && <div className={s.formControlSummaryError}>\r\n                {error}\r\n            </div>}\r\n            <div>\r\n                <button>login</button>\r\n            </div>\r\n        </form>)\r\n}\r\n//just wrapper\r\nconst LoginReduxForm = reduxForm<FormDataType>(\r\n    //uniq name\r\n    // @ts-ignore\r\n    {form: 'login'})(LoginForm)\r\nexport default LoginReduxForm","import React from 'react';\r\nimport LoginReduxForm, {FormDataType} from './LoginForm';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../../redux/redux-store';\r\nimport {login} from '../../redux/authReducer';\r\nimport {Redirect} from 'react-router-dom';\r\n\r\ntype LoginPageType = MapDispatchPropsType & MapStatePropsType\r\n\r\nconst LoginPage = (props: LoginPageType) => {\r\n\r\n    const onSubmitMy = (formData: FormDataType) => {\r\n        //login-callback\r\n        props.login(formData.email, formData.password, formData.rememberMe, formData.captcha)\r\n    }\r\n    if (props.isAuth) {\r\n        return <Redirect to={'/profile'}/>\r\n    }\r\n\r\n\r\n    return (<div>\r\n        <h1>Login here please</h1>\r\n        <LoginReduxForm\r\n            //@ts-ignore\r\n            captchaUrl={props.captchaUrl} onSubmit={onSubmitMy}/>\r\n    </div>)\r\n}\r\nexport type MapStatePropsType = {\r\n    isAuth: boolean,\r\n    captchaUrl: null | string,\r\n}\r\n\r\nexport  type MapDispatchPropsType = { login: (email: string, password: string, rememberMe: boolean, captchaUrl:null |string) => void }\r\n\r\nconst mapStateToProps = (state: AppStateType): MapStatePropsType => ({\r\n    isAuth: state.auth.isAuth,\r\n    captchaUrl: state.auth.captchaUrl,\r\n})\r\n\r\n\r\n//login is a callback, which dispatch call thunkCreator\r\nexport default connect<MapStatePropsType, MapDispatchPropsType, {}, AppStateType>(mapStateToProps, {login})(LoginPage)","import {getAuthUserData} from './authReducer';\r\nimport {Dispatch} from 'redux';\r\nimport {ActionTypes} from './types';\r\n\r\nconst SET_INITIALIZED = 'authReducer/SET_INITIALIZED'\r\n\r\nexport type InitializedType = {\r\n    initialized: boolean,\r\n}\r\n\r\nlet initialState: InitializedType = {\r\n    initialized: false,\r\n}\r\n\r\nconst appReducer = (state = initialState, action: ActionTypes): InitializedType => {\r\n    switch (action.type) {\r\n        case SET_INITIALIZED: {\r\n            return {\r\n                ...state,\r\n                initialized: action.payload,\r\n            }\r\n        }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n//actionCreator\r\nexport const setInitialized = (payload: boolean) => ({type: SET_INITIALIZED, payload}) as const\r\n\r\n//thunkCreator\r\nexport const initializeApp = () => (dispatch: Dispatch<any>) => {\r\n    let promise = dispatch(getAuthUserData())\r\n    //when all promises wil be resolved....then....\r\n    Promise.all([promise])\r\n        .then(() => {\r\n            dispatch(setInitialized(true))\r\n        })\r\n}\r\n\r\n\r\n//dispatch return us which return from thunk\r\nexport default appReducer","import {applyMiddleware, combineReducers, createStore} from 'redux';\r\nimport usersReducer from './usersPageReducer';\r\nimport authReducer from './authReducer';\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from 'redux-form'\r\nimport appReducer from './appReducer';\r\nimport profileReducer from './profilePageReducer';\r\nimport messageReducer from './messagePageReducer';\r\n\r\n\r\nlet reducers= combineReducers({    //as a state\r\n    profilePage: profileReducer,\r\n    messagePage:messageReducer,\r\n    usersPage:usersReducer,\r\n    auth:authReducer,\r\n    app:appReducer,\r\n    form: formReducer\r\n})\r\n\r\n\r\nexport type AppStateType = ReturnType<typeof reducers>\r\n\r\nlet store = createStore(reducers, applyMiddleware(thunkMiddleware))\r\n\r\n// @ts-ignore  //save store global\r\nwindow.store = store\r\nexport default store\r\n\r\n\r\n\r\n","import React, {ComponentType, lazy, Suspense} from 'react';\nimport './App.css';\nimport Nav from './components/NavBar/NavBar';\nimport {BrowserRouter, Route, withRouter} from 'react-router-dom'\nimport News from './components/News/News';\nimport Music from './components/Music/Music';\nimport Settings from './components/Settings/Settings';\nimport UsersContainer from './components/Users/UsersContainer';\nimport HeaderContainer from './components/Header/HeaderContainer';\nimport LoginPage from './components/LoginPage/LoginPage';\nimport {connect, Provider} from 'react-redux';\nimport {initializeApp} from './redux/appReducer';\nimport store, {AppStateType} from './redux/redux-store';\nimport Preloader from './components/common/Preloader';\nimport {compose} from 'redux';\n\nconst DialogsContainer = lazy(() => import('./components/Dialogs/DialogsContainer'));\nconst ProfileContainer = lazy(() => import('./components/Profile/ProfileContainer'));\n\nclass App extends React.Component<any, any> {\n    componentDidMount() {\n        this.props.initializeApp()\n    }\n\n    render() {\n        if (!this.props.initialized) {\n            return <Preloader/>\n        }\n        return (\n            <div className=\"app-wrapper\">\n                <HeaderContainer/>\n                <Nav/>\n                <div className='app-wrapper-all'>\n                    <Suspense fallback={<div>Загрузка...</div>}>\n                        <section>\n                            <Route path='/dialogs' render={() => <DialogsContainer/>}/>\n                            <Route path='/profile/:userId?' render={() => <ProfileContainer/>}/>\n                        </section>\n                    </Suspense>\n                    <Route path='/users' render={() => <UsersContainer/>}/>\n                    <Route path='/news' render={() => <News/>}/>\n                    <Route path='/music' render={() => <Music/>}/>\n                    <Route path='/settings' render={() => <Settings/>}/>\n                    <Route path='/login' render={() => <LoginPage/>}/>\n                </div>\n            </div>\n\n\n        );\n    }\n}\n\ntype MapStateToPropsType = {\n    initialized: boolean\n}\nconst mapStateToProps = (state: AppStateType): MapStateToPropsType => ({\n    initialized: state.app.initialized\n})\n\nlet AppContainer = compose<ComponentType>(withRouter, connect(mapStateToProps, {initializeApp}))(App);\n\n\nconst MainApp = () => {\n    return <BrowserRouter>\n        <Provider store={store}>\n            <AppContainer/>\n        </Provider>\n    </BrowserRouter>\n}\nexport default MainApp","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport MainApp from './App';\n\n\nReactDOM.render(\n    <MainApp/>,\n    document.getElementById('root')\n);\n\n\n\n","import React from 'react';\r\nimport s from './FormController.module.css'\r\n\r\n//not understand!\r\nexport const UniversalForm = ({input, meta: {touched, error}, child, ...props}) => {\r\n    const hasError = touched && error\r\n\r\n    return (<div className={s.formControl + \" \" + (hasError ? s.error : '')}>\r\n        <div>\r\n            {props.children}\r\n        </div>\r\n        {hasError && <span>{error}</span>}\r\n    </div>)\r\n}\r\nexport const Textarea = (props) => {\r\n    const {input, meta, child, ...restProps} = props\r\n    return <UniversalForm {...props}>\r\n        <textarea {...input}{...restProps}/>\r\n    </UniversalForm>\r\n\r\n}\r\n\r\nexport const Input = (props) => {\r\n    const {input, meta, child, ...restProps} = props\r\n    return <UniversalForm {...props}>\r\n        <input {...input}{...restProps}/>\r\n    </UniversalForm>\r\n\r\n}\r\n\r\n//after refactoring","//если все условия соблюдены, то возвращает undefined,продолжаем работу дальше\r\n//если validate не проходит тогда выбиваем ошибку!!!!\r\n\r\nexport const required = (value: any) => {\r\n    if (value) return undefined\r\n    return 'error'\r\n}\r\nexport const maxLengthCreator = (maxlength: number) => (value: any) => {\r\n    if (value.length > maxlength) return 'too many symbols'\r\n    return undefined\r\n}\r\nexport const minLengthCreator = (minLength: number) => (value: string) => {\r\n    if (value.length < minLength) return 'not enough symbols'\r\n    return undefined\r\n}\r\n","import React from 'react';\r\nimport preloader from '../../15.gif';\r\n\r\nconst Preloader = () => {\r\n    return (\r\n        <div>\r\n            <img src={preloader}/>\r\n        </div>\r\n    )\r\n}\r\n\r\n\r\n\r\nexport  default  Preloader","export default \"data:image/gif;base64,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\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"paginator\":\"Paginator_paginator__3XiV9\",\"pageNumber\":\"Paginator_pageNumber__WO6dN\",\"selectedPage\":\"Paginator_selectedPage__wwfdN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__2nciI\",\"login\":\"Header_login__2vBv_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControl\":\"FormController_formControl__flygR\",\"error\":\"FormController_error__EbEV6\",\"formControl-summary-error\":\"FormController_formControl-summary-error__E8woW\"};","import React from 'react'\r\nimport {Redirect} from 'react-router-dom';\r\nimport {connect} from 'react-redux';\r\nimport {AppStateType} from '../redux/redux-store';\r\n\r\n\r\nlet mapStateToPropsForRedirect = (state: AppStateType): MapStateToPropsType => {\r\n    return {isAuth: state.auth.isAuth}\r\n}\r\ntype MapStateToPropsType = {\r\n    isAuth: boolean\r\n}\r\n\r\nexport function WithAuthRedirectComponent<WCP>(WrappedComponent: React.ComponentType<WCP>) {\r\n    //WCP wrapped component props\r\n    const RedirectComponent: React.FC<MapStateToPropsType> = (props) => {\r\n        let {isAuth, ...restProps} = props\r\n        if (!props.isAuth) return <Redirect to={'/login'}/>\r\n        return <WrappedComponent {...restProps as WCP}/>\r\n    }\r\n\r\n    return connect<MapStateToPropsType, {}, WCP, AppStateType>(mapStateToPropsForRedirect)(RedirectComponent)\r\n}\r\n\r\n\r\n\r\n\r\n","import {ActionTypes, PostDataType, ProfilePageType, UserProfileType} from './types';\r\nimport {Dispatch} from 'redux';\r\nimport {profileAPI, usersAPI} from '../API/api';\r\nimport {v1} from 'uuid';\r\nimport {AppStateType} from './redux-store';\r\nimport {ThunkAction, ThunkDispatch} from 'redux-thunk';\r\nimport {stopSubmit} from 'redux-form';\r\n\r\n\r\nconst ADD_POST = 'profileReducer/ADD-POST';\r\nconst SET_USERS_PROFILE = 'profileReducer/SET-USERS-PROFILE';\r\nconst SET_STATUS = 'profileReducer/SET-STATUS';\r\nconst SET_PHOTO = 'profileReducer/SET-PHOTO';\r\nconst GET_STATUS = 'profileReducer/GET-STATUS';\r\nconst DELETE_POST = 'profileReducer/DELETE_POST';\r\n\r\nlet initialState: ProfilePageType = {\r\n    postData: [\r\n        {id: v1(), message: 'Hello', count: 100},\r\n        {id: v1(), message: 'How are you', count: 99},\r\n        {id: v1(), message: 'I am fine', count: 98},\r\n    ],\r\n    newPostText: 'it-kamasutra.com',\r\n    profile: null as UserProfileType | null,\r\n    status: ''\r\n}\r\n\r\n\r\nexport const profileReducer = (state = initialState, action: ActionTypes): ProfilePageType => {\r\n    switch (action.type) {\r\n        case ADD_POST:\r\n            let newPost: PostDataType = {\r\n                id: v1(),\r\n                message: action.newPostBody,\r\n                count: 0\r\n            }\r\n            return {\r\n                ...state,\r\n                postData: [...state.postData, newPost],\r\n            }\r\n        case DELETE_POST:\r\n            return {\r\n                ...state,\r\n                postData: state.postData.filter(el => el.id !== action.postId),\r\n            }\r\n        case SET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status,\r\n            }\r\n        case SET_PHOTO:\r\n            return {\r\n                ...state,\r\n                profile: {...state.profile, photos: action.photos} as UserProfileType\r\n            }\r\n        case GET_STATUS:\r\n            return {\r\n                ...state,\r\n                status: action.status,\r\n            }\r\n        case SET_USERS_PROFILE:\r\n            return {\r\n                ...state,\r\n                profile: action.profile,\r\n            }\r\n        default:\r\n            return state\r\n    }\r\n}\r\n\r\nexport const addPostCreator = (newPostBody: string) => ({type: ADD_POST, newPostBody}) as const\r\nexport const deletePostCreator = (postId: string) => ({type: DELETE_POST, postId}) as const\r\nexport const setUserProfile = (profile: UserProfileType) => ({type: SET_USERS_PROFILE, profile}) as const\r\nexport const getUserStatus = (status: string) => ({type: GET_STATUS, status}) as const\r\nexport const setStatus = (status: string) => ({type: SET_STATUS, status}) as const\r\nexport const setPhoto = (photos: { small: string, large: string }) => ({type: SET_PHOTO, photos}) as const\r\n\r\nexport const getStatus = (userId: number) => async (dispatch: Dispatch<ActionTypes>) => {\r\n    let response = await profileAPI.getStatus(userId)\r\n    dispatch(getUserStatus(response.data))\r\n}\r\nexport const updateStatus = (status: string) => async (dispatch: Dispatch<ActionTypes>) => {\r\n    let response = await profileAPI.updateStatus(status)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setStatus(status))\r\n    }\r\n}\r\n\r\nexport const getUserProfile = (userId: number) => async (dispatch: Dispatch<ActionTypes>) => {\r\n    let data = await usersAPI.getProfile(userId)\r\n    dispatch(setUserProfile(data))\r\n}\r\nexport const savePhoto = (file: string) => async (dispatch: Dispatch<ActionTypes>) => {\r\n    let response = await profileAPI.savePhoto(file)\r\n    if (response.data.resultCode === 0) {\r\n        dispatch(setPhoto(response.data.data.photos))\r\n    }\r\n}\r\n//TYPES FOR THUNK\r\ntype ThunkActionType = ThunkAction<void, AppStateType, unknown, ActionTypes>;\r\ntype ThunkDispatchType = ThunkDispatch<AppStateType, unknown, ActionTypes>;\r\n\r\nexport const saveNewProfileData = (formData: any): ThunkActionType => {\r\n    return async (dispatch: ThunkDispatchType, getState: () => AppStateType) => {\r\n        const userId = getState().auth.id\r\n        const response = await profileAPI.saveNewProfileData(formData)\r\n        if (response.data.resultCode === 0) {\r\n            if (userId !== null) {\r\n                dispatch(getUserProfile(userId))\r\n            }\r\n        } else {\r\n            let message = response.data.messages.length > 0 ? response.data.messages[0] : 'Some error'\r\n            dispatch(stopSubmit('edit-mode-profile', {_error: message}))\r\n            return Promise.reject(message)\r\n        }\r\n    }\r\n}\r\nexport default profileReducer"],"sourceRoot":""}